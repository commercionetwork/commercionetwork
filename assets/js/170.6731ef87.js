(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{482:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"simulation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#simulation"}},[a._v("#")]),a._v(" Simulation")]),a._v(" "),t("p",[a._v("This document aims to illustrate the stack creation or setup of two chains with "),t("code",[a._v("ignite")]),a._v(" for testing the behaviour we may expect from the module and the contract.")]),a._v(" "),t("h2",{attrs:{id:"setup-chains"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-chains"}},[a._v("#")]),a._v(" Setup chains")]),a._v(" "),t("p",[a._v("For this simulation we need two running chains connected by ignite relayer. We will use two local chains. Chain A will be configured by "),t("code",[a._v("config.yml")]),a._v(" and chain B by "),t("code",[a._v("commercio2.yml")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"run-chains"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-chains"}},[a._v("#")]),a._v(" Run chains")]),a._v(" "),t("p",[a._v("Start chain A on a terminal window")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ignite chain serve "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" \n")])])]),t("p",[a._v("endpoints:")]),a._v(" "),t("ul",[t("li",[a._v("Tendermint node: http://localhost:26657")]),a._v(" "),t("li",[a._v("API: http://localhost:1317")]),a._v(" "),t("li",[a._v("faucet: http://localhost:4500")])]),a._v(" "),t("p",[a._v("On another terminal window, start chain B")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ignite chain serve "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" commercio2.yml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" \n")])])]),t("p",[a._v("endpoints:")]),a._v(" "),t("ul",[t("li",[a._v("Tendermint node: http://localhost:26659")]),a._v(" "),t("li",[a._v("API: http://localhost:1318")]),a._v(" "),t("li",[a._v("faucet: http://localhost:4501")])]),a._v(" "),t("h3",{attrs:{id:"relay"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#relay"}},[a._v("#")]),a._v(" Relay")]),a._v(" "),t("p",[a._v("On a new terminal window, remove existing relayers and configure a new one.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" ~/.ignite/relayer\n\nignite relayer configure "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-rpc "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://127.0.0.1:26657"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-faucet "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://127.0.0.1:4500"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-port "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"transfer"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-version "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ics20-1"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-gasprice "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.01ucommercio"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-prefix "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"did:com:"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--source-gaslimit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("300000")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-rpc "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://127.0.0.1:26659"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-faucet "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://127.0.0.1:4501"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-port "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"transfer"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-version "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ics20-1"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-gasprice "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.01ucommercio"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-prefix "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"did:com:"')]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--target-gaslimit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("300000")]),a._v("\n")])])]),t("p",[a._v("When prompted, accept the default values for Source Account and Target Account.")]),a._v(" "),t("blockquote",[t("p",[a._v("If this generates the same account address for Source and target, and this would lead to some errors afterwards, it's possible to define an account by:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ignite account create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])])]),t("p",[a._v("Then when the terminal prompt for the account values one chain can use the default value while the other one use the previously defined account, typing it before hitting enter.")])]),a._v(" "),t("h3",{attrs:{id:"connect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connect"}},[a._v("#")]),a._v(" Connect")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ignite relayer connect\n")])])]),t("p",[a._v("This connect the two chains and will display the ports and channels of the connection.")]),a._v(" "),t("h2",{attrs:{id:"contract"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contract"}},[a._v("#")]),a._v(" Contract")]),a._v(" "),t("p",[a._v("The contract implement the middleware logic that permits to contol the set of address that can send token via IBC transfer, so it must be stored and instantiated on the chain.")]),a._v(" "),t("p",[a._v("Since there is no custom logic for receiving tokens from other chains, it's not necessary to set the contract in both chain, one is sufficient.")]),a._v(" "),t("h3",{attrs:{id:"compile-store"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-store"}},[a._v("#")]),a._v(" Compile & Store")]),a._v(" "),t("p",[a._v("A .wasm of the contract is already available in the "),t("RouterLink",{attrs:{to:"/modules/ibc-address-limiter/bytecode/"}},[t("code",[a._v("bytecode")])]),a._v(" folder. If you want to use, it sufficient to skip the compilation and just change the path of the local variable.")],1),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RUSTFLAGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-C link-arg=-s"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cargo")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--release")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--target")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("wasm32-unknown-unknown "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--locked")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WALLET_CREATOR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADDRESS_LIMITER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),a._v('/commercionetwork/x/ibc-address-limiter/target/wasm32-unknown-unknown/release/address_limiter.wasm"')]),a._v("\n\ncommercionetworkd tx wasm store "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDRESS_LIMITER")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$WALLET_CREATOR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Save the contract ID, for later instantition. The ID can be retrieved from the output of the previous Store.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LIMITER_CODE_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("h3",{attrs:{id:"instantiate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instantiate"}},[a._v("#")]),a._v(" Instantiate")]),a._v(" "),t("p",[a._v("In this step we have to instantiate the contract passing the ibc module address, the gov module address and the actual whitelist of permissioned addresses.")]),a._v(" "),t("p",[a._v("In this case we set only one address in the whitelist.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("INIT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"gov_module": "did:com:10d07y265gmmuvt4z0w9aw880jnsr700jdfgwkq","ibc_module": "did:com:1yl6hdjhmkf37639730gffanpzndzdpmhe5dzhs","addrs_whitelist": ["did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd"]}\'')]),a._v("\n\ncommercionetworkd tx wasm instantiate "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LIMITER_CODE_ID")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$INIT")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--label")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"IBC ADDRESS LIMITER"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--admin")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$WALLET_CREATOR")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$WALLET_CREATOR")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 10000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Save the contract address for setting module params and futher operations.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LIMITER_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"did:com:14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9sh7yll8"')]),a._v("\n")])])]),t("h3",{attrs:{id:"set-params"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-params"}},[a._v("#")]),a._v(" Set Params")]),a._v(" "),t("p",[a._v("As the contract to be used by the module it must be set as params, we submit a param change proposal and vote.")]),a._v(" "),t("p",[a._v("N.B. If the chain has multiple instantiation of this contract, only the one whose address is set as param of the module will be used and the others will be ignored.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd tx gov submit-proposal param-change "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),a._v("/proposal.json "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" gov "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n\ncommercionetworkd tx gov vote "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" gov "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\ncommercionetworkd tx gov vote "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" alice "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("proposal.json is:")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Ibc contract address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"description"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Add contract address limiter"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"changes"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"subspace"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"address-limited-ibc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"key"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"contract"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"value"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"did:com:14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9sh7yll8"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"deposit"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000000ucommercio"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\t\n")])])]),t("h2",{attrs:{id:"transfer-tokens"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transfer-tokens"}},[a._v("#")]),a._v(" Transfer Tokens")]),a._v(" "),t("p",[a._v("At this stage, the contract is instantiated and set as param in chain A. The whitelist contains only one the address "),t("code",[a._v('"did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd"')]),a._v(" and for simplicity it will be "),t("code",[a._v("alice")]),a._v(". Chain A and chain B are relayed and connected by ignite.")]),a._v(" "),t("p",[a._v("On new terminal window, alice transfer 200000ucommercio to a user in chain B:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd tx ibc-transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer channel-0 did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd 200000ucommercio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Verify on chain B")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd query bank balances did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" tcp://localhost:26659\n")])])]),t("p",[a._v("Response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("balances:\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"200000"')]),a._v("\n  denom: ibc/A0D0A020FC536B3F6E0F36B036E3C1941035D3428C7B76D4C2A55D0B2277C7E9\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"20000000000"')]),a._v("\n  denom: uccc\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"199899980000"')]),a._v("\n  denom: ucommercio\npagination:\n  next_key: null\n  total: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v("\n")])])]),t("p",[a._v("Someone who has not the permission, try transfer:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd tx ibc-transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer channel-0 did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd 200000ucommercio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" did:com:1829s409tjju2luhudq5dfeus6je3vfdnjv9tpn "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Error response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("failed to execute message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" message index: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(": Unauthorized"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" The sender did:com:1829s409tjju2luhudq5dfeus6je3vfdnjv9tpn\n  has not authorization: execute wasm contract failed: unauthorized\n")])])]),t("p",[a._v("Add address to the whitelist and retry.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADD_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"manage_whitelist":{"add_addrs":{"addresses":["did:com:1829s409tjju2luhudq5dfeus6je3vfdnjv9tpn"]}}}\'')]),a._v("\n\ncommercionetworkd tx gov submit-proposal execute-contract "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LIMITER_ADDRESS")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADD_ADDRESS")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--title")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Ibc contract execute"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--description")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Execute contract"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deposit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000000ucommercio"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" gov "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 10000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--run-as did:com:10d07y265gmmuvt4z0w9aw880jnsr700jdfgwkq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n\ncommercionetworkd query wasm contract-state smart "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LIMITER_ADDRESS")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{\"get_whitelist\":{}}'")]),a._v("\n")])])]),t("p",[a._v("Query response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("data:\n  wl:\n  - did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd\n  - did:com:1829s409tjju2luhudq5dfeus6je3vfdnjv9tpn\n")])])]),t("p",[a._v("Transfer and verify on chain B")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd tx ibc-transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer channel-0 did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd 200000ucommercio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" did:com:1829s409tjju2luhudq5dfeus6je3vfdnjv9tpn "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n\ncommercionetworkd query bank balances did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" tcp://localhost:26659\n")])])]),t("p",[a._v("Response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("balances:\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"400000"')]),a._v("\n  denom: ibc/EF505ADD9D17C91A013DC23BD975CEB7AA3CC118052940A20A3D623A75658B4C\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"20000000000"')]),a._v("\n  denom: uccc\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"199900000000"')]),a._v("\n  denom: ucommercio\npagination:\n  next_key: null\n  total: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v("\n")])])]),t("p",[a._v("Remove alice from the whitelist.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("REMOVE_ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"manage_whitelist":{"remove_addrs":{"addresses":["did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd"]}}}\'')]),a._v("\n\ncommercionetworkd tx gov submit-proposal execute-contract "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LIMITER_ADDRESS")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$REMOVE_ADDR")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--title")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"remove address"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--description")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"propose remove address"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deposit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000000ucommercio"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 10000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" gov\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--run-as did:com:10d07y265gmmuvt4z0w9aw880jnsr700jdfgwkq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Alice has no more permission to transfer tokens.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd tx ibc-transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer channel-0 did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd 200000ucommercio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Error response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("failed to execute message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" message index: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(": Unauthorized"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" The sender did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd has not authorization: execute wasm contract failed: unauthorized\n")])])]),t("p",[a._v("Empty whitelist to allow everyone transfer tokens.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("EMPTY_WL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"manage_whitelist":{"reset_whitelist":{}}}\'')]),a._v("\n\ncommercionetworkd tx gov submit-proposal execute-contract "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LIMITER_ADDRESS")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$EMPTY_WL")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--title")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Empty whitelist"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--description")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"propose empty wl"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deposit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000000ucommercio"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 10000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" gov\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--run-as did:com:10d07y265gmmuvt4z0w9aw880jnsr700jdfgwkq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n\ncommercionetworkd tx ibc-transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntransfer channel-0 did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd 200000ucommercio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" did:com:1zg4jreq2g57s4efrl7wnh2swtrz3jt9nfaumcm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fees")]),a._v(" 100000000ucommercio "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" text  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50000000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),t("p",[a._v("Check balance on chain B")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("commercionetworkd query bank balances did:com:18h03de6awcjk4u9gaz8s5l0xxl8ulxjctzsytd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" tcp://localhost:26659\n")])])]),t("p",[a._v("Response:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("balances:\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"600000"')]),a._v("\n  denom: ibc/EF505ADD9D17C91A013DC23BD975CEB7AA3CC118052940A20A3D623A75658B4C\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"20000000000"')]),a._v("\n  denom: uccc\n- amount: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"199900000000"')]),a._v("\n  denom: ucommercio\npagination:\n  next_key: null\n  total: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);