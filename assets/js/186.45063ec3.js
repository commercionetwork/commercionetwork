(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{498:function(e,o,t){"use strict";t.r(o);var r=t(14),a=Object(r.a)({},(function(){var e=this,o=e._self._c;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"updating-a-validator-chain"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#updating-a-validator-chain"}},[e._v("#")]),e._v(" Updating a validator/chain")]),e._v(" "),o("div",{staticClass:"custom-block danger"},[o("p",{staticClass:"custom-block-title"},[e._v("DANGER")]),e._v(" "),o("p",[e._v("If you are a new validator you need follow the "),o("RouterLink",{attrs:{to:"/nodes/validator-node-installation.html"}},[o("em",[e._v('"Becoming a validator"')]),e._v(" procedure")]),e._v("."),o("br"),e._v(" "),o("strong",[e._v("DO NOT USE THIS UPDATE INSTRUCTIONS")])],1)]),e._v(" "),o("p",[e._v("This section describes the procedure that needs to be followed in order to update a validator node from one\nversion to another."),o("br"),e._v("\nThe instructions below are only to decribe the general behavior when a upgrade event occours."),o("br"),e._v("\nEvery upgrade event will be associated to the peculiar instructions and the validators will be warned through standard comunication channels (Discord, Telegram, e-mail etc. etc.)")]),e._v(" "),o("h2",{attrs:{id:"upgrade-minor-release"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-minor-release"}},[e._v("#")]),e._v(" Upgrade minor release")]),e._v(" "),o("p",[e._v("When a minor release is publish the steps that the node should be performed are")]),e._v(" "),o("ol",[o("li",[e._v("Enter in your node and clone the repository in your server with "),o("code",[e._v("git clone https://github.com/commercionetwork/commercionetwork.git")]),e._v(" and move in the new folder "),o("code",[e._v("cd commercionetwork")]),e._v(". "),o("strong",[e._v("If you already have the repository folder use")]),e._v(" "),o("code",[e._v("cd commercionetwork; git pull")])]),e._v(" "),o("li",[e._v("Checkout the code to new versione with "),o("code",[e._v("git checkout <version target>; git pull")]),e._v(" where "),o("code",[e._v("<version target>")]),e._v(" is the new version or tag to install")]),e._v(" "),o("li",[e._v("Compile the new versione with the command "),o("code",[e._v("make build")]),e._v(". Control if your version is equal "),o("code",[e._v("<version target>")]),e._v(" using "),o("code",[e._v("./build/commercionetworkd version")])]),e._v(" "),o("li",[e._v("Stop the validator/node service with "),o("code",[e._v("systemctl stop commercionetworkd")])]),e._v(" "),o("li",[e._v("Put new version of chain in the right folder:\n"),o("ol",[o("li",[o("strong",[e._v("Cosmovisor")]),e._v(": copy the binary in cosmovisor current folder "),o("code",[e._v("cp build/commercionetworkd ~/.commercionetwork/cosmovisor/current/bin/commercionetworkd")])]),e._v(" "),o("li",[o("strong",[e._v("Old style installation")]),e._v(": copy the binary in "),o("code",[e._v("GOBIN")]),e._v(" path. In the most cases "),o("code",[e._v("cp build/commercionetworkd ~/go/bin/commercionetworkd")])]),e._v(" "),o("li",[o("strong",[e._v("Other enviroment")]),e._v(": if you have a custom env copy the new binary replacing the one on which the chain service is based")])])]),e._v(" "),o("li",[e._v("Start the validator/node service with "),o("code",[e._v("systemctl start commercionetworkd")])]),e._v(" "),o("li",[e._v("Check the validator/node blocks issuance with "),o("code",[e._v("journalctl -u commercionetworkd -f")])]),e._v(" "),o("li",[e._v("Also check the validator signature blocks by looking at "),o("a",{attrs:{href:"https://mainnent.commercio.network",target:"_blank",rel:"noopener noreferrer"}},[e._v("Commercio Network explorer"),o("OutboundLink")],1)])]),e._v(" "),o("h2",{attrs:{id:"upgrade-via-proposal"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-via-proposal"}},[e._v("#")]),e._v(" Upgrade via Proposal")]),e._v(" "),o("p",[e._v("The main way to upgrade chain and its nodes for a major release is via the Upgrade Proposal."),o("br"),e._v("\nEverytime a new major release will be released a Upgrade Proposol will be submited in the chain and all users of chain with stake will be able to vote it."),o("br"),e._v("\nEach proposal will be displayed in the explorer in this "),o("a",{attrs:{href:"https://mainnet.commercio.network/proposals/",target:"_blank",rel:"noopener noreferrer"}},[e._v("page"),o("OutboundLink")],1)]),e._v(" "),o("p",[e._v("Clicking one proposal you can access to the proposal details and you can vote it with keplr extension.")]),e._v(" "),o("p",[e._v("Another way to vote is using "),o("code",[e._v("cli")]),e._v(" interface of "),o("code",[e._v("commercionetworkd")]),e._v(" program")]),e._v(" "),o("div",{staticClass:"language-bash extra-class"},[o("pre",{pre:!0,attrs:{class:"language-bash"}},[o("code",[e._v("commercionetworkd tx gov vote "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("id proposl"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("option vote"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),o("p",[e._v("You can vote "),o("code",[e._v("yes")]),e._v(", "),o("code",[e._v("no")]),e._v(", "),o("code",[e._v("abstain")]),e._v(", "),o("code",[e._v("nowithveto")]),e._v("."),o("br"),e._v("\nUpgrade Proposal contains the details of upgrade, the halt block and the version of software.")]),e._v(" "),o("p",[e._v("After acceptance of the proposal the chain will halt at the block of proposal and wait the new version of the software.")]),e._v(" "),o("p",[e._v("Using cosmovisor you can put new software in the "),o("code",[e._v("upgrades")]),e._v(" folder, and wait that the cosmovisor deamon perform all job by itself."),o("br"),e._v("\nAn example of these procedure could be find "),o("a",{attrs:{href:"https://github.com/commercionetwork/commercio-consortium/tree/master/upgrade/3.1.0-4.0.0/en",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"emergency-upgrade"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#emergency-upgrade"}},[e._v("#")]),e._v(" Emergency Upgrade")]),e._v(" "),o("p",[e._v("In some cases an emergency update may be necessary. In this case a special message will be sent to all validators, sometimes in the group channel and in other case with a 1-1 comunication."),o("br"),e._v("\nThese upgrades is quite rare and are performed only when a real danger issue is found in the chain software.")]),e._v(" "),o("h2",{attrs:{id:"dump-upgrade"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dump-upgrade"}},[e._v("#")]),e._v(" Dump Upgrade")]),e._v(" "),o("p",[e._v("This type of upgrade is a special case. In epochal cases, the chain could stop because consensus issues. Sometimes, in such cases, the only way to restart the chain is dump the whole state, correct the errors, install new software in all validators, import the state, install the new genesis, and start the chain."),o("br"),e._v("\nAn example of these procedure could be find "),o("a",{attrs:{href:"https://github.com/commercionetwork/commercio-consortium/blob/master/upgrade/2.2.0-3.0.0/en/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("strong",[e._v("(WIP)")])])])}),[],!1,null,null,null);o.default=a.exports}}]);